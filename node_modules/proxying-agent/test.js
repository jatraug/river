var https = require('https');


var proxying = require('./index');
var proxyingOptions = {
  proxy: 'http://capdesigner:az!rpac@proxy.capriza.com:3128',
  tunnel: true
};
var proxyingAgent = new proxying.ProxyingAgent(proxyingOptions);


var req = https.request({
  host: 'api.capriza.com',
  port: 443,
  path: '/catalog/auth/login.json',
  agent: proxyingAgent
}, function(res) {
  console.log('STATUS: ' + res.statusCode);
  console.log('HEADERS: ' + JSON.stringify(res.headers));
  res.setEncoding('utf8');
  res.on('data', function (chunk) {
    console.log('BODY: ' + chunk);
  });
  req.socket.destroy();
});

req.on('error', function(err) {
  console.log(err);
});


req.end();